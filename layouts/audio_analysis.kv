#:import fileChooser fileChooser

<AudioAnalysisTabs@TabbedPanel>:
    do_default_tab: False
    tab_width: self.parent.width / 5
    TabbedPanelItem:
        text: "load audio"
        FileViewer:
            padding:"10dp"
            attached_label: "Please select an audio file."
            popup_title: "Select audio file"
    TabbedPanelItem:
        text: "time domain"
        TimeDomain:
    TabbedPanelItem:
        text: "frequency domain"
        FrequencyDomain:



<TimeDomain>:
    cols: 2
    padding: "10dp"
    spacing: "10dp"
    BoxLayout:
        spacing: "10dp"
        orientation:"vertical"
        Button:
            text: "Play Audio"
            on_press: root.play_audio()
        Button:
            text: "Stop Audio"
            on_press: root.stop_audio()
    Label:
        text_size: self.size
        halign: 'left'
        valign: 'middle'
        text: "Listen to the selected audio file in the 'load audio' tab"
    Button:
        size_hint: 1, None
        height: "50dp"
        text: "Show signal"
        on_press: root.visualize_audio()
    Label:
        text_size: self.size
        size_hint: 1, None
        height: "50dp"
        halign: 'left'
        valign: 'middle'
        text: "Shows a plot of the audio signal in the time domain"
    BoxLayout:
        spacing: "5dp"
        orientation:"vertical"
        Button:
            text: "Audio features"
            on_press: root.get_audio_feat_res()
        GridLayout:
            cols: 2
            spacing: "5dp"
            TextInput:
                id: frame_length_input
                hint_text: "press enter for saving"
                text: root.frame_length
                multiline: False
                on_text_validate: root.on_text_validate(self)
            Label:
                text_size: self.size
                halign: 'left'
                valign: 'middle'
                halign: 'left'
                text: "frame length"
            TextInput:
                id: hop_length_input
                hint_text: "press enter for saving"
                text: root.hop_length
                multiline: False
                on_text_validate: root.on_text_validate(self)
            Label:
                text_size: self.size
                halign: 'left'
                valign: 'middle'
                halign: 'left'
                text: "hop length"
    TextInput:
        text: root.audio_feat_res
        readonly: True

    Button:
        size_hint: 1, None
        height: "50dp"
        text: "Plot audio features"
        on_press: root.visualize_audio_features()


  
<FrequencyDomain>:
    cols: 2
    padding: "10dp"
    spacing: "10dp"
    Button:
        text: "Show spectrogram"
        on_press: root.show_spectrogram()
    Label:
        text_size: self.size
        halign: 'left'
        valign: 'middle'
        text: "Show a spectrogram for the selected audio file"
    BoxLayout:
        spacing: "10dp"
        orientation:"vertical"
        Button:
            text: "Audio features"
            on_press: root.get_audio_feat_res()
        GridLayout:
            cols: 2
            spacing: "5dp"
            TextInput:
                id: frame_length_input
                text: root.frame_length
                hint_text: "press enter for saving"
                multiline: False
                on_text_validate: root.on_text_validate(self)
            Label:
                text_size: self.size
                halign: 'left'
                valign: 'middle'
                halign: 'left'
                text: "frame length"
            TextInput:
                id: hop_length_input
                text: root.hop_length
                hint_text: "press enter for saving"
                multiline: False
                on_text_validate: root.on_text_validate(self)
            Label:
                text_size: self.size
                halign: 'left'
                valign: 'middle'
                halign: 'left'
                text: "hop length"
    TextInput:
        text: root.audio_feat_res
        readonly: True

    Button:
        text: "Plot audio features"
        on_press: root.visualize_audio_features()
    Label:
        text_size: self.size
        halign: 'left'
        valign: 'middle'
        text: "Overlays the audio features in a spectrogram. Plot generation can take some time"



